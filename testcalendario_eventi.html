<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Calendario Eventi - Basket Group Beers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
  @font-face{
    font-family:'Strike Fighter Laser';
    src:url('https://raw.githubusercontent.com/sverza/Brewers/main/Font/strikefighterlaser.ttf') format('truetype');
    font-weight:normal;font-style:normal;
  }
  :root{
    --bg:#090909; --card:#111418; --muted:#c5c6c7; --accent:#66fcf1; --accent-2:#9AD7F3;
    --border:rgba(102,252,241,.12); --win:#2ecc71; --lose:#e74c3c; --sched:#3498db; --other:#7f8c8d;
    --violet:#b388ff; --violet-text:#d7c5ff;
    --radius:0; --shadow:0 8px 18px rgba(0,0,0,.35); --gap:16px; --cal-width:560px;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{width:100%;height:100%;overflow-x:hidden;background:var(--bg);font-family:'Segoe UI',sans-serif;color:#fff}
  .container{max-width:1130px;margin:0 auto;padding:16px 10px}
  h1,h2{font-family:'Strike Fighter Laser',sans-serif;color:#e8eef2;text-align:center}
  h1{font-size:clamp(22px,3.2vw,32px);letter-spacing:.3px;margin:10px 0 8px}
  h2{font-size:clamp(18px,3vw,26px);margin:0 0 8px}

  .legenda{display:flex;justify-content:center;gap:.5rem;margin-bottom:12px}
  .legend-chip{font-family:'Strike Fighter Laser',sans-serif;font-size:.95rem;padding:.25rem .5rem;border:1px solid var(--border);background:#0f1620;color:#eaf6ff;border-radius:8px}
  .legend-chip.vittoria{background:rgba(46,204,113,.15);color:#21aa64;border-color:rgba(46,204,113,.25)}
  .legend-chip.sconfitta{background:rgba(231,76,60,.15);color:#ff5252;border-color:rgba(231,76,60,.25)}
  .legend-chip.in_programma{background:rgba(52,152,219,.15);color:#9ad7f3;border-color:rgba(52,152,219,.25)}
  .legend-chip.generico{background:rgba(127,140,141,.15);color:#d9d9d9;border-color:rgba(127,140,141,.25)}

  .layout{display:grid;gap:var(--gap);grid-template-columns:1fr}
  @media (min-width:992px){
    .layout{grid-template-columns:var(--cal-width) 1fr}
    .calendar-col{justify-self:start}
    .detail-col{position:relative}
  }
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}

  /* Calendario */
  .calendar-wrap{width:var(--cal-width);max-width:100%}
  #calendar-header{display:flex;align-items:center;gap:10px;margin:6px 0}
  .month-nav{border:1px solid var(--border);background:#0f1620;color:#9AD7F3;width:34px;height:34px;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center}
  #month-label{font-family:'Strike Fighter Laser',sans-serif;color:#e8eef2;font-size:1.1rem}
  .dow{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin:8px 0 6px;color:#cdd7e1;font-weight:600;text-align:center}
  .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
  .day{background:#1a1f26;border:1px solid rgba(255,255,255,.06);min-height:56px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .06s,border-color .15s}
  .day:hover{transform:translateY(-1px);border-color:var(--accent)}
  .day.empty{background:transparent;border:none;cursor:default}
  .has-event{font-weight:700}
  .day.vittoria{background:rgba(46,204,113,.25);color:#dfffe9}
  .day.sconfitta{background:rgba(231,76,60,.25)}
  .day.in_programma{background:rgba(52,152,219,.25)}
  .day.generico{background:rgba(127,140,141,.25)}
  .day.today{outline:2px solid var(--accent);box-shadow:0 0 0 2px rgba(102,252,241,.15) inset}

  /* Dettaglio */
  .detail-panel{padding:14px;margin-top:12px} /* spazio extra sotto il calendario */
  @media (min-width:992px){.detail-panel{position:sticky;top:20px}}
  .detail-empty{color:#9aa4ad;padding:12px;background:#10161d;border:1px dashed var(--border)}
  .detail-title{display:flex;align-items:center;gap:.5rem;color:#e8eef2;margin:6px 0 8px}
  .chip{font-family:'Strike Fighter Laser',sans-serif;font-size:.85rem;padding:.2rem .5rem;border:1px solid var(--border);border-radius:8px;background:#0f1620;color:#cfefff}
  .chip-home{background:rgba(102,252,241,.15);border-color:rgba(102,252,241,.35);color:var(--accent)}   /* Casa: cyan */
  .chip-away{background:rgba(179,136,255,.18);border-color:rgba(179,136,255,.35);color:var(--violet-text)} /* Trasferta: violet */
  .detail-meta p{margin:6px 0;color:#eaf6ff}
  .detail-meta em{color:#9AD7F3}
  .detail-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .btn-brewers{font-family:'Strike Fighter Laser',sans-serif;font-size:1rem;display:inline-flex;align-items:center;justify-content:center;padding:.5rem 1.1rem;border-radius:10px;border:1px solid rgba(0,0,0,.08);background:var(--accent);color:#0b0c10;cursor:pointer;box-shadow:0 6px 14px rgba(154,215,243,.18), inset 0 1px 0 rgba(255,255,255,.35);transition:transform .15s, background-color .2s, box-shadow .2s}
  .btn-brewers:hover{background:#6bbfd8;box-shadow:0 8px 18px rgba(107,191,216,.28), inset 1px 1px 0 rgba(255,255,255,.4);transform:translateY(-1px)}
  .btn-icon{width:34px;height:34px;padding:0;border-radius:8px;display:inline-flex;align-items:center;justify-content:center}

  /* Widget */
  .widgets{display:flex;flex-direction:column;gap:var(--gap);margin-top:var(--gap)}
  .widget{padding:12px;position:relative;overflow:hidden}
  .widget h2{margin:0 0 8px}
  .h-scroll{display:flex;gap:10px;overflow-x:auto;overflow-y:hidden;padding:0 44px 12px;scroll-behavior:smooth;scroll-snap-type:x mandatory;max-width:100%;-webkit-overflow-scrolling:touch;scrollbar-width:none}
  .h-scroll::-webkit-scrollbar{display:none}
  .event-card{background:#1f1f1f;border:1px solid var(--border);border-radius:0;padding:10px 12px;scroll-snap-align:start;flex:0 0 300px;max-width:300px;box-shadow:0 3px 6px rgba(0,0,0,.2)}
  .event-card h3{margin:0 0 6px;color:#fff;font-weight:800;font-family:'Inter',sans-serif;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .event-card p{margin:3px 0;font-size:.95rem;color:#d9d9d9;font-family:'Inter',sans-serif}
  .event-card em{color:var(--accent-2)}
  .scroll-btn{position:absolute;top:46px;width:38px;height:38px;border:none;background:rgba(15,18,22,.7);backdrop-filter:blur(4px);border:1px solid var(--border);box-shadow:0 6px 14px rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:2}
  .scroll-left{left:6px}.scroll-right{right:6px}
  .scroll-btn svg{width:18px;height:18px;color:#9AD7F3}
  </style>
</head>
<body>
  <div id="header-container"></div>

  <div class="container">
    <h1>CALENDARIO EVENTI</h1>
    <div class="legenda">
      <span class="legend-chip vittoria">VITTORIA</span>
      <span class="legend-chip sconfitta">SCONFITTA</span>
      <span class="legend-chip in_programma">IN PROGRAMMA</span>
      <span class="legend-chip generico">ALTRO</span>
    </div>

    <div class="layout">
      <div class="calendar-col">
        <div class="calendar-wrap">
          <div id="calendar-header">
            <button class="month-nav" id="prev-month" aria-label="Mese precedente">â€¹</button>
            <div id="month-label"></div>
            <button class="month-nav" id="next-month" aria-label="Mese successivo">â€º</button>
          </div>
          <div class="dow"><div>Lun</div><div>Mar</div><div>Mer</div><div>Gio</div><div>Ven</div><div>Sab</div><div>Dom</div></div>
          <div id="calendar" class="calendar"></div>
        </div>

        <aside class="card detail-panel" id="detail-panel">
          <div class="detail-empty" id="detail-empty">Seleziona un evento sul calendario per vedere i dettagli.</div>
          <div id="detail-content" style="display:none;">
            <h3 class="detail-title" id="det-title"></h3>
            <div class="detail-meta" id="det-meta"></div>
            <div class="detail-actions" id="det-actions"></div>
          </div>
        </aside>

        <div class="widgets" id="widgets-block">
          <section class="card widget">
            <button class="scroll-btn scroll-left"  data-target="future-events" aria-label="Scorri a sinistra">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <button class="scroll-btn scroll-right" data-target="future-events" aria-label="Scorri a destra">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 6l6 6-6 6"/></svg>
            </button>
            <h2>ðŸ“… PROSSIMI EVENTI</h2>
            <div id="future-events" class="h-scroll"></div>
          </section>

          <section class="card widget">
            <button class="scroll-btn scroll-left"  data-target="past-events" aria-label="Scorri a sinistra">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <button class="scroll-btn scroll-right" data-target="past-events" aria-label="Scorri a destra">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 6l6 6-6 6"/></svg>
            </button>
            <h2>ðŸ•’ EVENTI PASSATI</h2>
            <div id="past-events" class="h-scroll"></div>
          </section>
        </div>
      </div>

      <div class="detail-col" id="detail-col"></div>
    </div>
  </div>

  <div id="footer-container"></div>

  <script>
    const MAX_FUTURE=10, MAX_PAST=12;
    let currentMonth=new Date().getMonth();
    let currentYear=new Date().getFullYear();
    let eventi=[], eventiPerData={};

    const mesi={"gennaio":1,"febbraio":2,"marzo":3,"aprile":4,"maggio":5,"giugno":6,"luglio":7,"agosto":8,"settembre":9,"ottobre":10,"novembre":11,"dicembre":12};
    const weekdaysRegex=/^(lunedÃ¬|martedÃ¬|mercoledÃ¬|giovedÃ¬|venerdÃ¬|sabato|domenica)\s+/i;
    function parseDataItToISO(s){
      if(!s) return null;
      s=s.toLowerCase().trim().replace(weekdaysRegex,'').trim();
      const m=s.match(/^(\d{1,2})\s+([a-zÃ ]+)\s+(\d{4})$/i);
      if(!m) return null; const g=parseInt(m[1],10), mn=mesi[m[2]], a=parseInt(m[3],10);
      if(!g||!mn||!a) return null; return `${a}-${String(mn).padStart(2,'0')}-${String(g).padStart(2,'0')}`;
    }
    function sanitizeOra(ora){ return ora?String(ora).replace(/!/g,'1'):null; }
    function ordinaPerData(a,b){const ai=a.dataISO||"9999-12-31", bi=b.dataISO||"9999-12-31"; if(ai<bi)return-1;if(ai>bi)return1;return 0;}

    function determinareTipo(m,iso){
      const today=new Date().toISOString().slice(0,10);
      const pC=m["Punteggio Casa"], pT=m["Punteggio Trasferta"];
      const brewersCasa=(m["Squadra Casa"]||"").toUpperCase()==="BREWERS";
      if(iso && today<=iso && (pC==null||pT==null)) return "in_programma";
      if(pC!=null && pT!=null){const my=brewersCasa?pC:pT, opp=brewersCasa?pT:pC; return my>opp?'vittoria':(my<opp?'sconfitta':'generico');}
      const w=(m["Squadra Vincitrice"]||"").toUpperCase(); if(w==="BREWERS") return "vittoria"; if(w) return "sconfitta"; return "generico";
    }
    function buildTitolo(m){return `${(m["Squadra Casa"]||"").toUpperCase()} vs ${(m["Squadra Trasferta"]||"").toUpperCase()}`;}
    function isCasa(m){return (m["Squadra Casa"]||"").toUpperCase()==="BREWERS";}

    async function fetchFirstWorking(urls){
      for(const url of urls){
        try{ const r=await fetch(url,{cache:'no-store'}); if(r.ok){ return await r.json(); } }catch(_){}
      }
      throw new Error('Nessuna sorgente calendario raggiungibile');
    }
    async function fetchCalendarioJSON(){
      // prova sia calendario.json che eventi.json su piÃ¹ percorsi
      const bases=['calendario','eventi'];
      const rels=['partite/','../partite/','/partite/','https://brewersbasketball.it/partite/','https://raw.githubusercontent.com/sverza/Brewers/main/partite/'];
      const candidates=[];
      bases.forEach(b=>rels.forEach(p=>candidates.push(`${p}${b}.json`)));
      return fetchFirstWorking(candidates);
    }

    async function caricaEventi(){
      const futureWrap=document.getElementById('future-events');
      const pastWrap=document.getElementById('past-events');
      futureWrap.innerHTML = `<div class="event-card"><p>Caricamentoâ€¦</p></div>`;
      pastWrap.innerHTML   = `<div class="event-card"><p>Caricamentoâ€¦</p></div>`;

      try{
        const partite=await fetchCalendarioJSON();
        eventi=[]; eventiPerData={};
        const todayISO=new Date().toISOString().slice(0,10);

        partite.filter(m=>{
          const c=(m["Squadra Casa"]||"").toUpperCase(), t=(m["Squadra Trasferta"]||"").toUpperCase();
          return c==="BREWERS" || t==="BREWERS";
        }).forEach(m=>{
          const iso=parseDataItToISO(m["Data"]);
          const ev={dataISO:iso,titolo:buildTitolo(m),luogo:m["Luogo"]||"",indirizzo:m["Indirizzo"]||"",tipo:determinareTipo(m,iso),raw:m};
          eventi.push(ev); if(iso){(eventiPerData[iso]??=[]).push(ev);}
        });

        const futuri=eventi.filter(e=>!e.dataISO || e.dataISO>=todayISO).sort(ordinaPerData).slice(0,MAX_FUTURE);
        const passati=eventi.filter(e=>e.dataISO && e.dataISO<todayISO).sort(ordinaPerData).slice(-MAX_PAST);

        renderWidget(futuri,futureWrap);
        renderWidget(passati,pastWrap);

        aggiornaCalendario();
        placeDetailPanel();
        wireScrollButtons();
      }catch(e){
        console.error('[Calendario] fallback vuoto:', e);
        futureWrap.innerHTML = `<div class="event-card"><p>Nessun evento.</p></div>`;
        pastWrap.innerHTML   = `<div class="event-card"><p>Nessun evento.</p></div>`;
        eventi=[]; eventiPerData={}; aggiornaCalendario();
      }
    }

    const calEl=document.getElementById('calendar');
    calEl.addEventListener('click',e=>{
      const cell=e.target.closest('.day');
      if(!cell || cell.classList.contains('empty')) return;
      if(cell.classList.contains('has-event') && cell.dataset.date){
        mostraDettaglioGiorno(cell.dataset.date);
        if(window.matchMedia('(max-width: 991px)').matches){
          document.getElementById('detail-panel').scrollIntoView({behavior:'smooth',block:'start'});
        }
      }else{
        // giorno senza eventi -> nascondi completamente la card
        document.getElementById('detail-panel').style.display='none';
      }
    });

    function aggiornaCalendario(){
      const cal=calEl; cal.innerHTML="";
      const label=new Date(currentYear,currentMonth).toLocaleString("it-IT",{month:"long",year:"numeric"});
      document.getElementById('month-label').textContent=label.charAt(0).toUpperCase()+label.slice(1);

      const first=new Date(currentYear,currentMonth,1);
      let fd=first.getDay(); if(fd===0) fd=7;
      const days=new Date(currentYear,currentMonth+1,0).getDate();
      const todayISO=new Date().toISOString().slice(0,10);

      for(let i=1;i<fd;i++) cal.innerHTML+=`<div class="day empty" aria-hidden="true"></div>`;
      for(let g=1; g<=days; g++){
        const iso=`${currentYear}-${String(currentMonth+1).padStart(2,'0')}-${String(g).padStart(2,'0')}`;
        const list=eventiPerData[iso];
        let cls="day";
        if(list&&list.length){
          const pr={vittoria:3,sconfitta:3,in_programma:2,generico:1};
          const top=list.map(e=>e.tipo||"generico").sort((a,b)=>(pr[b]||0)-(pr[a]||0))[0]||"generico";
          cls+=` has-event ${top}`;
        }
        if(iso===todayISO) cls+=' today';
        cal.innerHTML+=`<div class="${cls}" ${list?`data-date="${iso}"`:""}>${g}</div>`;
      }
    }

    function renderWidget(lista,container){
      container.innerHTML="";
      if(!lista.length){container.innerHTML=`<div class="event-card"><p>Nessun evento.</p></div>`;return;}
      lista.forEach(ev=>{
        const m=ev.raw, vis=m["Data"]||ev.dataISO||"Data da definire";
        const ora=sanitizeOra(m["Ora"]); const oraTxt=ora?` â€” <strong>Ora:</strong> ${ora}`:"";
        const ind=ev.indirizzo?`<br><em>${ev.indirizzo}</em>`:"";
        const card=document.createElement('div'); card.className='event-card';
        card.innerHTML=`<h3>${ev.titolo}</h3><p><strong>Data:</strong> ${vis}${oraTxt}</p><p><strong>Luogo:</strong> ${ev.luogo}${ind}</p>`;
        if(ev.dataISO){ card.style.cursor='pointer'; card.addEventListener('click',()=>mostraDettaglioGiorno(ev.dataISO)); }
        container.appendChild(card);
      });
    }
    function wireScrollButtons(){
      document.querySelectorAll('.scroll-btn').forEach(btn=>{
        const id=btn.dataset.target, dir=btn.classList.contains('scroll-left')?-1:1;
        btn.onclick=()=>{const c=document.getElementById(id); const step=Math.min(300,Math.round(c.clientWidth*0.9)); c.scrollBy({left:dir*step,behavior:'smooth'});}
      });
    }

    function clearDetailToEmpty(){
      const p=document.getElementById('detail-panel');
      p.style.display='block';
      document.getElementById('detail-empty').style.display='block';
      document.getElementById('detail-content').style.display='none';
    }

    async function mostraDettaglioGiorno(iso){
      const list=eventiPerData[iso]; if(!list||!list.length) return;
      const panel=document.getElementById('detail-panel');
      panel.style.display='block';

      const ev=list[0], m=ev.raw;
      const badge=`<span class="chip ${isCasa(m)?'chip-home':'chip-away'}">${isCasa(m)?"CASA":"TRASFERTA"}</span>`;
      document.getElementById('detail-empty').style.display='none';
      document.getElementById('detail-content').style.display='block';
      document.getElementById('det-title').innerHTML=`${buildTitolo(m)} ${badge}`;

      const pC=m["Punteggio Casa"], pT=m["Punteggio Trasferta"];
      const score=(pC!=null && pT!=null)?`<p><strong>Punteggio:</strong> ${m["Squadra Casa"]} ${pC} - ${pT} ${m["Squadra Trasferta"]}</p>`:"";
      const ora=sanitizeOra(m["Ora"]); const turno=m["Turno"]?`<p><strong>Turno:</strong> ${m["Turno"]}</p>`:"";
      const mapsHref=(ev.indirizzo||ev.luogo)?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ev.indirizzo||ev.luogo)}`:null;

      document.getElementById('det-meta').innerHTML=`
        <p><strong>Data:</strong> ${m["Data"]||iso}</p>
        ${ora?`<p><strong>Ora:</strong> ${ora}</p>`:""}
        <p><strong>Luogo:</strong> ${ev.luogo}</p>
        ${ev.indirizzo?`<p><em>${ev.indirizzo}</em></p>`:""}
        ${turno}
        ${score}
      `;

      const actions=document.getElementById('det-actions'); actions.innerHTML="";
      if(mapsHref){ const a=document.createElement('a'); a.href=mapsHref; a.className='btn-brewers btn-icon'; a.target='_blank'; a.title='Apri in Maps'; a.innerHTML=mapsSVG(); actions.appendChild(a); }

      // link articolo/statistiche solo per eventi passati (matching per sola data, come richiesto)
      const todayISO=new Date().toISOString().slice(0,10);
      if(ev.dataISO && ev.dataISO<todayISO){
        const base = ev.dataISO.replaceAll('-','');         // YYYYMMDD
        const art = await findFirstExistingBase('articoli_per_news',[base,`${base}_@`,`${base}_`]); // prende il primo che trova
        const stat= await findFirstExistingBase('partite',[base,`${base}_`]);
        if(stat){ const a=document.createElement('a'); a.className='btn-brewers btn-icon'; a.href=`https://brewersbasketball.it/risultati_partite.html?partita=${stat}`; a.title='Statistiche'; a.innerHTML=statsSVG(); actions.appendChild(a); }
        if(art){  const a=document.createElement('a'); a.className='btn-brewers btn-icon'; a.href=`https://brewersbasketball.it/article_view.html?articolo=${art}`; a.title='Articolo'; a.innerHTML=articleSVG(); actions.appendChild(a); }
        if(!stat && !art){ const s=document.createElement('span'); s.style.color='#9bb'; s.textContent='Nessun contenuto collegato trovato per questa data.'; actions.appendChild(s); }
      }
    }
    async function findFirstExistingBase(folder,bases){
      for(const base of bases){
        try{
          // prova il nome cosÃ¬ com'Ã¨ e qualsiasi file che inizi con la stessa data
          const try1 = await fetch(`${folder}/${base}.json`,{cache:'no-store'});
          if(try1.ok) return base;
          const list = await fetch(`${folder}/`,{cache:'no-store'});
          // se directory listing non Ã¨ abilitato, ignora lâ€™errore
        }catch(_){}
      } return null;
    }
    function statsSVG(){return `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h2v18H3V3zm4 8h2v10H7V11zm4-6h2v16h-2V5zm4 4h2v12h-2V9zm4-8h2v20h-2V1z"/></svg>`;}
    function articleSVG(){return `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2h10a2 2 0 0 1 2 2v16l-5-3-5 3V4a2 2 0 0 1 2-2zM9 6h6v2H9V6zm0 4h6v2H9v-2z"/></svg>`;}
    function mapsSVG(){return `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/></svg>`;}

    document.getElementById('prev-month').addEventListener('click',()=>{currentMonth--;if(currentMonth<0){currentMonth=11;currentYear--;}aggiornaCalendario();});
    document.getElementById('next-month').addEventListener('click',()=>{currentMonth++;if(currentMonth>11){currentMonth=0;currentYear++;}aggiornaCalendario();});

    function placeDetailPanel(){
      const panel=document.getElementById('detail-panel');
      const detailCol=document.getElementById('detail-col');
      if(window.matchMedia('(max-width: 991px)').matches){
        const calWrap=document.querySelector('.calendar-wrap');
        if(panel.parentElement!==calWrap.parentElement) calWrap.parentElement.insertBefore(panel,document.getElementById('widgets-block'));
      }else{
        if(panel.parentElement!==detailCol){detailCol.innerHTML='';detailCol.appendChild(panel);}
      }
    }
    window.addEventListener('resize',placeDetailPanel);

    // Header & Footer
    fetch('https://raw.githubusercontent.com/sverza/Brewers/main/widget/brewers_header.html').then(r=>r.text()).then(h=>document.getElementById('header-container').innerHTML=h);
    fetch('https://raw.githubusercontent.com/sverza/Brewers/main/widget/brewers_footer.html').then(r=>r.text()).then(h=>document.getElementById('footer-container').innerHTML=h);

    // Avvio
    caricaEventi().then(clearDetailToEmpty);
  </script>
</body>
</html>
