<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../CSS_StyleSheets/homepage_globals.css" />
    <link rel="stylesheet" href="../CSS_StyleSheets/homepage_styleguide.css" />
    <link rel="stylesheet" href="../CSS_StyleSheets/homepage_style.css" />
  </head>
  <body>
    <div class="landing-page">
      <div class="div">
        <div class="overlap">
          <div class="text-wrapper">Ultime NEWS</div>
          <button class="button"><div class="text-wrapper-2">Vai all’elenco</div></button>
        </div>
        <div class="overlap-group">
          <div class="text-wrapper-3">Ultime Partite</div>
          <div class="text-wrapper-4">Prossimi appuntamenti</div>
        </div>
        <div class="overlap-2">
          <div class="frame">
            <div class="overlap-3">
              <div class="text-wrapper-5">Brewers</div>
              <div class="text-wrapper-6">64</div>
              <div class="text-wrapper-7">52</div>
              <div class="text-wrapper-8">Pio XI Speranza</div>
            </div>
            <img class="line" src="img/image.svg" />
            <div class="overlap-group-2">
              <div class="text-wrapper-5">Brewers</div>
              <div class="text-wrapper-6">64</div>
              <div class="text-wrapper-7">52</div>
              <div class="text-wrapper-8">Pio XI Speranza</div>
            </div>
            <img class="img" src="img/line-2.svg" />
            <button class="div-wrapper"><div class="text-wrapper-9">Report</div></button>
            <button class="button-2"><div class="text-wrapper-9">Report</div></button>
            <button class="button-3"><div class="text-wrapper-9">Report</div></button>
            <div class="text-wrapper-10">L</div>
            <div class="text-wrapper-11">L</div>
            <div class="text-wrapper-12">W</div>
          </div>
          <div class="text-wrapper-13">Brewers</div>
          <div class="text-wrapper-14">120</div>
          <div class="text-wrapper-15">1</div>
          <div class="text-wrapper-16">Ceriano</div>
        </div>
        <div class="frame-2">
          <div class="overlap-4">
            <div class="overlap-group-3">
              <div class="text-wrapper-17">Brewers</div>
              <div class="text-wrapper-18">Pio XI Speranza</div>
              <div class="text-wrapper-19">27 feb</div>
              <div class="via-gorki">Via Gorki 100<br />Cinisello Balsamo</div>
              <div class="text-wrapper-20">h 21:00</div>
            </div>
            <img class="fa-plane" src="img/fa-plane.svg" />
          </div>
          <div class="overlap-5">
            <div class="overlap-group-3">
              <div class="text-wrapper-17">Brewers</div>
              <div class="text-wrapper-21">Pio XI Speranza</div>
              <div class="text-wrapper-19">27 feb</div>
              <div class="via-gorki">Via Gorki 100<br />Cinisello Balsamo</div>
              <div class="text-wrapper-20">h 21:00</div>
            </div>
            <img class="fa-plane-2" src="img/fa-plane.svg" />
          </div>
          <div class="overlap-6">
            <div class="rectangle"></div>
            <div class="text-wrapper-22">Brewers</div>
            <div class="text-wrapper-23">Pio XI Speranza</div>
            <div class="text-wrapper-24">27 feb</div>
            <div class="via-gorki-2">Via Gorki 100<br />Cinisello Balsamo</div>
            <div class="text-wrapper-25">h 21:00</div>
            <img class="vector" src="img/vector.svg" />
          </div>
          <img class="line" src="img/line-1.svg" />
          <img class="img" src="img/line-2-2.svg" />
        </div>
        <!--<div class="navigation-footer">
          <div class="text-wrapper-26">BREWERS</div>
          <div class="social-icons">
            <div class="buttons-icon">
              <div class="icon"><img class="icon-2" src="img/icon-3.svg" /></div>
            </div>
            <div class="buttons-icon">
              <div class="icon"><img class="icon-3" src="img/icon.svg" /></div>
            </div>
            <div class="buttons-icon">
              <div class="icon"><img class="icon-2" src="img/icon-2.svg" /></div>
            </div>
          </div>
          <img class="divider" src="img/divider.svg" />
        </div>-->
	<div id="brewers-footer-placeholder"></div>
        <div class="navigation">
          <div class="items">
            <div class="text-wrapper-27">Roster</div>
            <div class="text-wrapper-27">Articoli</div>
            <div class="text-wrapper-27">Calendario</div>
            <button class="button-4"><div class="text-wrapper-28">Contatti</div></button>
          </div>
          <div class="text-wrapper-29">BREWERS</div>
        </div>
        <div class="hero-image">
          <div class="overlap-7">
            <div class="text-wrapper-30">BREWERS</div>
            <div class="PASSION-GAME-VICTORY">PASSION. GAME. VICTORY...<br />BEERS!</div>
            <div class="buttons">
              <button class="button-5"><div class="text-wrapper-31">Calendario</div></button>
              <button class="button-6"><div class="text-wrapper-32">Chi Siamo</div></button>
            </div>
          </div>
        </div>
        <div class="overlap-8"><div class="text-wrapper">LINK UTILI</div></div>
        <div class="frame-3">
          <div class="card">
            <div class="image"><img class="element" id="myImg1"></div>
            <div class="copy">
              <div class="text-wrapper-33" id="myTitle1"></div>
              <p class="p" id="myShortDescription1"></p>
            </div>
		  <div id="myArticleUrl1"></div>
          </div>
          <div class="card">
            <div class="element-wrapper"><img class="element-2" id="myImg2"></div>
            <div class="copy">
              <p class="text-wrapper-33" id="myTitle2"></p>
              <p class="p" id="myShortDescription2"></p>
            </div>
            <a id="myArticleUrl2"><button class="button-8" id="btnArt2">Leggi</button></a>
          </div>
          <div class="card">
            <div class="img-wrapper"><img class="element-2" id="myImg3"></div>
            <div class="copy">
              <p class="text-wrapper-33" id="myTitle3"></p>
              <p class="p" id="myShortDescription3"></p>
            </div>
            <a id="myArticleUrl3"><button class="button-9" id="btnArt3">Leggi</button></a>
          </div>
        </div>
        <div class="text">
          <div class="text-2">
            <div class="text-wrapper-35">CALENDARIO</div>
            <p class="text-wrapper-36">Vuoi venirci a vedere?<br />Controlla i nostri prossimi appuntamenti!</p>
            <div class="button-wrapper">
              <button class="button-10"><div class="text-wrapper-37">Vai</div></button>
            </div>
          </div>
        </div>
        <div class="text-3">
          <div class="text-wrapper-35">ROSTER</div>
          <p class="text-wrapper-36">Vuoi conoscerci?<br />Clicca e scopri i nostri Brewers!</p>
          <div class="button-wrapper">
            <button class="button-10"><div class="text-wrapper-37">Vai</div></button>
          </div>
        </div>
        <div class="section">
          <div class="buttons-2">
            <button class="button-11"><div class="text-wrapper-37">Social</div></button>
            <button class="button-12"><div class="text-wrapper-38">Contattaci</div></button>
          </div>
          <div class="text-wrapper-39">Contatti</div>
        </div>
      </div>
    </div>
    Uicons by <a href="https://www.flaticon.com/uicons">Flaticon</a>
  </body>
  
  <script>
    // in case of a viewport
if (document.documentElement.clientWidth < 900) {
//scripts --> redirect
    window.location = "https://brewersbasketball.it/home_mobile.html"
}

// in case of a screen
if (screen.width < 900) {
//scripts --> redirect
    window.location = "https://brewersbasketball.it/home_mobile.html"
}

var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function(){
    if (xhttp.readyState == 4 && xhttp.status == 200){
        document.body.innerHTML += xhttp.responseText; // you can change the target. As long as you append xhttp.responseText. It will work fine.
    }
};
xhttp.open('GET', 'widget/brewers_footer.html', true); // note: link the footer.html
xhttp.send();
	  	  
function getRecentJSONFiles() {
    const directoryPath = "articoli_per_news"; // Path della directory
    const numberOfFiles = 3; // Numero di file da ottenere

    fetch(`https://api.github.com/repos/sverza/Brewers/contents/${directoryPath}`)
	.then(response => response.json())
	.then(data => {
	    // Converti l'oggetto in un array
	    const filesArray = Array.from(data);

	    // Ordina i file per data di ultima modifica in ordine decrescente
	    const sortedFiles = filesArray.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

	    // Prendi i primi numberOfFiles file
	    const recentFiles = sortedFiles.slice(0, numberOfFiles);

	    // Scarica i file JSON
	    recentFiles.forEach((file, index) => {
		fetch(file.download_url)
		    .then(response => response.json())
		    .then(jsonData => {
			    
			const article = `article${index + 1}`;
			window[article] = Object.assign({}, jsonData);

			staticUrl = "https://brewersbasketball.it/article_view.html?title=";
			variableUrl = file.name.split('.json')[0];
			finalUrl = staticUrl + variableUrl;

			const myArticleUrl = document.getElementById(`myUrl${index + 1}`);
			myArticleUrl.innerHTML = "<a href='"+finalUrl+"'><button class="button-7" id='"+btnArt1${index + 1}+"'>Leggi</button></a>";
			const Img = window[article].img_name;
			const myTitle = document.getElementById(`myTitle${index + 1}`);
			myTitle.innerHTML = window[article].title;
			const myShortDescription = document.getElementById(`myShortDescription${index + 1}`);
			myShortDescription.innerHTML = window[article].short_description;
			const urlImg =`../articoli_per_news/images/${Img}`
			console.log(urlImg);
			console.log(myTitle);
			console.log(myTitle.innerHTML);
			document.getElementById(`myImg${index + 1}`).src=urlImg;
			    
			    
			    if (window[article].category != "report_partita") {
				    const btnVid = `btnVid${index + 1}`;
				    const btnStats = `btnStats${index + 1}`;
				    var x = document.getElementById(btnVid);
				    var y = document.getElementById(btnStats);
				    x.style.display = "none";
				    y.style.display = "none";
			    }
			

			// Fai qualcosa con i dati JSON
			console.log(window[article]);
			console.log(window[article].short_description);
		    })
		    .catch(error => console.log(error));
	    });
	})
	.catch(error => console.log(error));
}

// Chiamata alla funzione per ottenere i file JSON più recenti
getRecentJSONFiles();

    
  </script>
</html>
